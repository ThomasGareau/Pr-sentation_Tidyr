<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>tidyr : la lada des packages</title>
    <meta charset="utf-8" />
    <meta name="author" content="Thomas Gareau Paquette" />
    <meta name="date" content="2021-11-13" />
    <script src="libs/header-attrs-2.11/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/default-fonts.css" rel="stylesheet" />
    <script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
    <link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding-0.19/datatables.js"></script>
    <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
    <link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
    <script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# tidyr : la lada des packages
## Présentation orale - FAS 1002
### Thomas Gareau Paquette
### Université de Montréal
### 2021-11-13

---

class: inverse, middle, center
background-image: url(https://tidyr.tidyverse.org/logo.png)
background-size: 120px 120 px
background-position: top

\
&amp;nbsp;
\
&amp;nbsp;

# tidyr, c'est quoi?


"*tidy datasets are all alike, but every messy dataset is messy in its own way*" 

Hadley Wickham 
&lt;!-- c'est la promesse de plus de temps consacré à l'analyse --&gt;

---
class: inverse, middle, center

# Prologue 

### Prononciation : le débat

#### / ˈtaɪdi ɑː / ?

Les experts ne s'entendent pas quant à la façon dont l'usager doit prononcer le néologisme « tidyr » :

![unchanged image](tidyr-poll.png)

&lt;!-- Aussi, « tidyr » ne prend jamais de majuscule --&gt;

---
class: inverse, top, center

# Prologue (suite)

### Les données que nous manipulerons

Les données que nous manipulerons proviennent du package **palmerpenguins** :


```r
#install.packages("palmerpenguins")
df_raw &lt;- palmerpenguins::penguins_raw
```




```r
df &lt;- palmerpenguins::penguins
```

--
class: inverse, top


Puisque cette présentation en est une sur Tidyr, nous utiliserons les données brutes histoire de les « nettoyer ». 


--
class: inverse, top
Plus de détails sur cette base de données [ici](https://allisonhorst.github.io/palmerpenguins/) 

---
class: inverse, middle, center

![unchanged image](https://allisonhorst.github.io/palmerpenguins/man/figures/lter_penguins.png)


---
background-image: url(https://allisonhorst.github.io/palmerpenguins/man/figures/lter_penguins.png)
background-position: 50% 50%
class: inverse

#  &lt;span style="color:red"&gt;1. À quoi sert Tidyr ?&lt;/span&gt;.
 

---
class: inverse, top

# 1 À quoi sert Tidyr ?

&lt;!-- Expliquer image (variables, observations, values) --&gt;

---
class: inverse, top


## 1.1 Fondements théoriques


Le « *data tidying* » est une façon cohérente d'organiser vos données dans R.


Trois règles inter-reliées permettent d'affirmer qu'un jeu de données est "*Tidy*" :

--


- Chaque variable a sa propre colonne;

--


- Chaque observation a sa propre rangée;

--


- Chaque valeur a sa propre cellule.


---
class: inverse, top

## 1.1 Fondements théoriques


Ces règles étant **inter-reliées**, ces règles pourraient être résumées en deux commandements : 



--

- Chaque jeu de données doit avoir son *tibble*



--
- Chaque variable doit être avoir sa colonne. 


--

&lt;!-- L'adage veut que 80% de l'analyse des données soit consacrée au nettoyage et à la préparation des données. --&gt;

![unchanged image](https://garrettgman.github.io/images/tidy-1.png)

.footnote[[*] source : Wickham et Grolemund 2016, 149]

---
class: inverse, top

## 1.2 Avantages du « Tidying »

.pull-left[
- Des données suivant une consistante permettent de développer les outils qui vous rendront plus efficaces;

- Placer les variables dans les colonnes permet à la nature vectorielle de R d'utiliser son plein potentiel;

- Des packages du *tidyverse* comme dplyr et ggplot2 sont conçus pour fonctionner avec des « *tidy data* »;


- Votre tranquilité d'esprit.
]

--
.pull-right[
![unchanged image](https://cdn.shopify.com/s/files/1/2975/7656/files/netflix-hero_600x.jpg?v=1545247760)
]

---
class: inverse, top

# 1.3 Prérequis

### tidyr appartient au « *core* » de tidyverse : 

Un seul prérequis :


```r
library(tidyverse)
```


```r
library(kableExtra)
```


Si vous êtes un « *contrarian* », vous pouvez aussi directement installer **tidyr** : 


```r
#library(tidyr)
```


---
background-image: url(https://allisonhorst.github.io/palmerpenguins/man/figures/lter_penguins.png)
background-position: 0% 0%

#  &lt;span style="color:red"&gt;2. Utilisation &lt;/span&gt;

\
&amp;nbsp;
\
&amp;nbsp;

## « the principles of tidy data seem so obivous that you might wonder if you'll ever encounter a dataset that isn't tidy. » 

 
---
class: top,

Voici notre banque de donnée avant le "tidying" :

--

```r
DT::datatable(
  head(df_raw, 20),
  fillContainer = TRUE, options = list(pageLength = 8)
)
```

<div id="htmlwidget-44e9f04a8417cf8c51b4" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-44e9f04a8417cf8c51b4">{"x":{"filter":"none","vertical":false,"fillContainer":true,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"],["PAL0708","PAL0708","PAL0708","PAL0708","PAL0708","PAL0708","PAL0708","PAL0708","PAL0708","PAL0708","PAL0708","PAL0708","PAL0708","PAL0708","PAL0708","PAL0708","PAL0708","PAL0708","PAL0708","PAL0708"],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],["Adelie Penguin (Pygoscelis adeliae)","Adelie Penguin (Pygoscelis adeliae)","Adelie Penguin (Pygoscelis adeliae)","Adelie Penguin (Pygoscelis adeliae)","Adelie Penguin (Pygoscelis adeliae)","Adelie Penguin (Pygoscelis adeliae)","Adelie Penguin (Pygoscelis adeliae)","Adelie Penguin (Pygoscelis adeliae)","Adelie Penguin (Pygoscelis adeliae)","Adelie Penguin (Pygoscelis adeliae)","Adelie Penguin (Pygoscelis adeliae)","Adelie Penguin (Pygoscelis adeliae)","Adelie Penguin (Pygoscelis adeliae)","Adelie Penguin (Pygoscelis adeliae)","Adelie Penguin (Pygoscelis adeliae)","Adelie Penguin (Pygoscelis adeliae)","Adelie Penguin (Pygoscelis adeliae)","Adelie Penguin (Pygoscelis adeliae)","Adelie Penguin (Pygoscelis adeliae)","Adelie Penguin (Pygoscelis adeliae)"],["Anvers","Anvers","Anvers","Anvers","Anvers","Anvers","Anvers","Anvers","Anvers","Anvers","Anvers","Anvers","Anvers","Anvers","Anvers","Anvers","Anvers","Anvers","Anvers","Anvers"],["Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen"],["Adult, 1 Egg Stage","Adult, 1 Egg Stage","Adult, 1 Egg Stage","Adult, 1 Egg Stage","Adult, 1 Egg Stage","Adult, 1 Egg Stage","Adult, 1 Egg Stage","Adult, 1 Egg Stage","Adult, 1 Egg Stage","Adult, 1 Egg Stage","Adult, 1 Egg Stage","Adult, 1 Egg Stage","Adult, 1 Egg Stage","Adult, 1 Egg Stage","Adult, 1 Egg Stage","Adult, 1 Egg Stage","Adult, 1 Egg Stage","Adult, 1 Egg Stage","Adult, 1 Egg Stage","Adult, 1 Egg Stage"],["N1A1","N1A2","N2A1","N2A2","N3A1","N3A2","N4A1","N4A2","N5A1","N5A2","N6A1","N6A2","N7A1","N7A2","N8A1","N8A2","N9A1","N9A2","N10A1","N10A2"],["Yes","Yes","Yes","Yes","Yes","Yes","No","No","Yes","Yes","Yes","Yes","Yes","Yes","Yes","Yes","Yes","Yes","Yes","Yes"],["2007-11-11","2007-11-11","2007-11-16","2007-11-16","2007-11-16","2007-11-16","2007-11-15","2007-11-15","2007-11-09","2007-11-09","2007-11-09","2007-11-09","2007-11-15","2007-11-15","2007-11-16","2007-11-16","2007-11-12","2007-11-12","2007-11-16","2007-11-16"],[39.1,39.5,40.3,null,36.7,39.3,38.9,39.2,34.1,42,37.8,37.8,41.1,38.6,34.6,36.6,38.7,42.5,34.4,46],[18.7,17.4,18,null,19.3,20.6,17.8,19.6,18.1,20.2,17.1,17.3,17.6,21.2,21.1,17.8,19,20.7,18.4,21.5],[181,186,195,null,193,190,181,195,193,190,186,180,182,191,198,185,195,197,184,194],[3750,3800,3250,null,3450,3650,3625,4675,3475,4250,3300,3700,3200,3800,4400,3700,3450,4500,3325,4200],["MALE","FEMALE","FEMALE",null,"FEMALE","MALE","FEMALE","MALE",null,null,null,null,"FEMALE","MALE","MALE","FEMALE","FEMALE","MALE","FEMALE","MALE"],[null,8.94956,8.36821,null,8.76651,8.66496,9.18718,9.4606,null,9.13362,8.63243,null,null,null,8.55583,null,9.18528,8.67538,8.47827,9.11616],[null,-24.69454,-25.33302,null,-25.32426,-25.29805,-25.21799,-24.89958,null,-25.09368,-25.21315,null,null,null,-25.22588,null,-25.06691,-25.13993,-25.23319,-24.77227],["Not enough blood for isotopes.",null,null,"Adult not sampled.",null,null,"Nest never observed with full clutch.","Nest never observed with full clutch.","No blood sample obtained.","No blood sample obtained for sexing.","No blood sample obtained for sexing.","No blood sample obtained.","Not enough blood for isotopes.","Not enough blood for isotopes.",null,"Not enough blood for isotopes.",null,null,null,null]],"container":"<table class=\"display fill-container\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>studyName<\/th>\n      <th>Sample Number<\/th>\n      <th>Species<\/th>\n      <th>Region<\/th>\n      <th>Island<\/th>\n      <th>Stage<\/th>\n      <th>Individual ID<\/th>\n      <th>Clutch Completion<\/th>\n      <th>Date Egg<\/th>\n      <th>Culmen Length (mm)<\/th>\n      <th>Culmen Depth (mm)<\/th>\n      <th>Flipper Length (mm)<\/th>\n      <th>Body Mass (g)<\/th>\n      <th>Sex<\/th>\n      <th>Delta 15 N (o/oo)<\/th>\n      <th>Delta 13 C (o/oo)<\/th>\n      <th>Comments<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":8,"columnDefs":[{"className":"dt-right","targets":[2,10,11,12,13,15,16]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[8,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>

---
class: top

## 2.1 *Spreading* et *Gathering*

« the principles of tidy data seem so obivous that you might wonder if you'll ever encounter a dataset that isn't tidy. » 





---
class: center, bottom, inverse


  
  
---
class: inverse, middle, center

# Using xaringan

---

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"slideNumberFormat": "%current%",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
