---
title: "tidyr : la lada des packages"
subtitle: "Présentation orale - FAS 1002"
author: "Thomas Gareau Paquette"
institute: "Université de Montréal"
date: "`r Sys.Date()`"
output:
  xaringan::moon_reader:
    lib_dir: libs
    nature:
      slideNumberFormat: "%current%"
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---
class: inverse, middle, center
background-image: url(https://tidyr.tidyverse.org/logo.png)
background-size: 120px 120 px
background-position: top

\
&nbsp;
\
&nbsp;

# tidyr, c'est quoi?


"*tidy datasets are all alike, but every messy dataset is messy in its own way*" 

Hadley Wickham 
<!-- c'est la promesse de plus de temps consacré à l'analyse -->

---
class: inverse, middle, center

# Prologue 

### Prononciation : le débat

#### / ˈtaɪdi ɑː / ?

Les experts ne s'entendent pas quant à la façon dont l'usager doit prononcer le néologisme « tidyr » :

![unchanged image](tidyr-poll.png)

<!-- Aussi, « tidyr » ne prend jamais de majuscule -->

---
class: inverse, top, center

# Prologue (suite)

### Les données que nous manipulerons

Les données que nous manipulerons proviennent du package **palmerpenguins** :

```{r}
#install.packages("palmerpenguins")
df_raw <- palmerpenguins::penguins_raw
```



```{r eval=FALSE, tidy=FALSE}
df <- palmerpenguins::penguins
```

--
class: inverse, top


Puisque cette présentation en est une sur Tidyr, nous utiliserons les données brutes histoire de les « nettoyer ». 


--
class: inverse, top
Plus de détails sur cette base de données [ici](https://allisonhorst.github.io/palmerpenguins/) 

---
class: inverse, middle, center

![unchanged image](https://allisonhorst.github.io/palmerpenguins/man/figures/lter_penguins.png)


---
background-image: url(https://allisonhorst.github.io/palmerpenguins/man/figures/lter_penguins.png)
background-position: 50% 50%
class: inverse

#  <span style="color:red">1. À quoi sert Tidyr ?</span>.
 

---
class: inverse, top

# 1 À quoi sert Tidyr ?

<!-- Expliquer image (variables, observations, values) -->

---
class: inverse, top


## 1.1 Fondements théoriques


Le « *data tidying* » est une façon cohérente d'organiser vos données dans R.


Trois règles inter-reliées permettent d'affirmer qu'un jeu de données est "*Tidy*" :

--


- Chaque variable a sa propre colonne;

--


- Chaque observation a sa propre rangée;

--


- Chaque valeur a sa propre cellule.


---
class: inverse, top

## 1.1 Fondements théoriques


Ces règles étant **inter-reliées**, ces règles pourraient être résumées en deux commandements : 



--

- Chaque jeu de données doit avoir son *tibble*



--
- Chaque variable doit être avoir sa colonne. 


--

<!-- L'adage veut que 80% de l'analyse des données soit consacrée au nettoyage et à la préparation des données. -->

![unchanged image](https://garrettgman.github.io/images/tidy-1.png)

.footnote[[*] source : Wickham et Grolemund 2016, 149]

---
class: inverse, top

## 1.2 Avantages du « Tidying »

.pull-left[
- Des données suivant une consistante permettent de développer les outils qui vous rendront plus efficaces;

- Placer les variables dans les colonnes permet à la nature vectorielle de R d'utiliser son plein potentiel;

- Des packages du *tidyverse* comme dplyr et ggplot2 sont conçus pour fonctionner avec des « *tidy data* »;


- Votre tranquilité d'esprit.
]

--
.pull-right[
![unchanged image](https://cdn.shopify.com/s/files/1/2975/7656/files/netflix-hero_600x.jpg?v=1545247760)
]

---
class: inverse, top

# 1.3 Prérequis

### tidyr appartient au « *core* » de tidyverse : 

Un seul prérequis :

```{r message=FALSE}
library(tidyverse)
```

```{r message=FALSE}
library(kableExtra)
```


Si vous êtes un « *contrarian* », vous pouvez aussi directement installer **tidyr** : 

```{r }
#library(tidyr)
```


---
background-image: url(https://allisonhorst.github.io/palmerpenguins/man/figures/lter_penguins.png)
background-position: 0% 0%

#  <span style="color:red">2. Utilisation </span>

\
&nbsp;
\
&nbsp;

## « the principles of tidy data seem so obivous that you might wonder if you'll ever encounter a dataset that isn't tidy. » 

 
---
class: top,

Voici notre banque de donnée avant le "tidying" :

--
```{r eval=require('DT'), tidy=FALSE}
DT::datatable(
  head(df_raw, 20),
  fillContainer = TRUE, options = list(pageLength = 8)
)
```

---
class: top

## 2.1 *Spreading* et *Gathering*

« the principles of tidy data seem so obivous that you might wonder if you'll ever encounter a dataset that isn't tidy. » 





---
class: center, bottom, inverse


  
  
---
class: inverse, middle, center

# Using xaringan

---

